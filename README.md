# thingworx-async-tasks
[Unofficial/Not Supported] Contains the code of the ThingWorx AsyncTasks Extension built on Extension SDK version 9.4 (not provided here).
[Work in progress]

This is an Ant Eclipse (Version: 2023-12 (4.30.0)) project that uses the ThingWorx Eclipse plugin, available in the support.ptc.com portal under the ThingWorx platform downloads.
1. Install the ThingWorx Eclipse plugin v 9.0.1.202102191527
2. Download the ThingWorx Extension SDK version 9.4. It should be a zip file.
3. Import the project: Use the File Menu / Import / Projects from Folder or Archive.
4. After import, right click on the project name in the left hand side of the screen and in the ThingWorx Extension tab setup the path to the Extension SDK zip file.
5. Execute the ant build task. The project uses a customized version of the ant build script that is generated by the ThingWorx Eclipse plugin.

This is a CompletableFuture Java wrapper for ThingWorx, which allows executing multiple tasks asynchronously and accessing their result in the same service in a similar style as of Javascript Promise.


## How to Use in ThingWorx
1. Download the extension from the Releases section.
2. Install the extension in ThingWorx
3. Assign the **AsyncProcessing** ThingShape to any Thing or ThingTemplate. This will expose access to the **ProcessTasks** service.
4. Process Tasks service takes as input a list of Tasks (1 Task = 1 combination of ThingName, ServiceName and InputParameters): <br>
  4.1 Create an infotable (PTC.AT.Input.Datashape) of Tasks: <br>
  ```
let tasks = DataShapes["PTC.AT.Input.Datashape"].CreateValues();
tasks.AddRow({
    Service: "SlowService1", // STRING
    InputParameters: "{\"message\":\"Message from service wrapper for service 1\"}", // STRING
    ThingName: "testhing" // THINGNAME
});
tasks.AddRow({
    Service: "SlowService2", // STRING
    InputParameters: "{\"message\":\"Message from service wrapper for service 2\"}", // STRING
    ThingName: "testhing" // THINGNAME
});
```
<br>
4.2 Execute the tasks by executing ProcessTasks with the infotable above as input
```
result = me.ProcessTasks({
	Tasks: tasks /* INFOTABLE {"dataShape":"PTC.AT.Input.Datashape"} */
});
```
**This Extension is provided as-is and without warranty or support. It is not part of the PTC product suite**. This project is licensed under the terms of the MIT license.
